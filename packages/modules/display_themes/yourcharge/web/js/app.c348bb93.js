(function(){"use strict";var t={304:function(t,e,n){n(8077);var o=n(5130),s=n(6768),a=n(4232),i=n.p+"img/YourCharge_Icon-FlatBlue-qrcode.116dff89.png";const r={class:"d-flex flex-row m-3 mb-0 mt-0"},l=(0,s.Lk)("img",{id:"logo",src:i},null,-1),c={class:"phases"},u={class:"d-flex flex-row justify-content-center align-items-center"},d=(0,s.Lk)("span",{class:"fas fa-clock"},null,-1),p=(0,s.Lk)("span",null,"Bildschirm-Timeout ändern",-1),m=[d,p],h=(0,s.Lk)("span",{class:"fas fa-star-of-life"},null,-1),k=(0,s.Lk)("span",null,"Pin ändern",-1),g=[h,k],f=(0,s.Lk)("span",{class:"fas fa-lock"},null,-1),v=(0,s.Lk)("span",null,"Bildschirm sperren",-1),L=[f,v],b={class:"home container-fluid px-1 m-0"},C={class:"row py-0 px-0 m-0"},w={key:0,class:"modal-wrapper"},P={class:"custom-modal"},y={class:"d-flex flex-column justify-content-center align-items-center"},_=(0,s.Lk)("h3",{class:"pb-3"},"Entsperrcode eingeben",-1),T={class:"d-flex flex-row justify-content-center align-items-center input-wrapper"},I=["value","type"],x={class:"numpad"},W={class:"numpad-row"},S={class:"numpad-row"},M={class:"numpad-row"},A={class:"numpad-row"},B=(0,s.Lk)("span",{class:"fas fa-delete-left"},null,-1),O=[B],R=(0,s.Lk)("span",{class:"fas fa-unlock"},null,-1),E=[R],j={key:1,class:"modal-wrapper"},N={class:"custom-modal d-flex flex-column"},Q={key:0},F={key:1},D=(0,s.Lk)("p",null,"Bitte warten",-1),X=(0,s.Lk)("span",{class:"fas fa-spinner fa-spin"},null,-1),z={key:2,class:"modal-wrapper"},U={class:"custom-modal d-flex flex-column"},$=(0,s.Lk)("span",{class:"fas fa-times"},null,-1),J=[$],G=(0,s.Lk)("h3",null,"Entsperrcode ändern",-1),q={class:"d-flex flex-column justify-content-center align-items-center"},Y={key:0,class:"headline"},K={key:1,class:"headline"},H={key:2,class:"headline"},Z={class:"d-flex flex-row justify-content-center align-items-center input-wrapper"},V=["value","type"],tt={class:"numpad"},et={class:"numpad-row"},nt={class:"numpad-row"},ot={class:"numpad-row"},st={class:"numpad-row"},at=(0,s.Lk)("span",{class:"fas fa-delete-left"},null,-1),it=[at],rt=(0,s.Lk)("span",{class:"fas fa-unlock"},null,-1),lt=[rt],ct={key:3,class:"modal-wrapper"},ut={class:"custom-modal d-flex flex-column"},dt=(0,s.Lk)("span",{class:"fas fa-times"},null,-1),pt=[dt],mt=(0,s.Lk)("h3",null,"Timeout ändern",-1),ht={class:"d-flex flex-column justify-content-center align-items-center"},kt=(0,s.Lk)("p",null,"Zeit bis der Bildschirm gesperrt werden soll in Sekunden",-1),gt={class:"d-flex flex-row justify-content-center align-items-center input-wrapper"},ft=["value"],vt={class:"numpad"},Lt={class:"numpad-row"},bt={class:"numpad-row"},Ct={class:"numpad-row"},wt={class:"numpad-row"},Pt=(0,s.Lk)("span",{class:"fas fa-delete-left"},null,-1),yt=[Pt],_t=(0,s.Lk)("span",{class:"fas fa-save"},null,-1),Tt=[_t];function It(t,e,n,o,i,d){const p=(0,s.g2)("PowerCard"),h=(0,s.g2)("InfoTableCard");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",{onClick:e[3]||(e[3]=(...e)=>t.resetOrInitLockInterval&&t.resetOrInitLockInterval(...e)),class:(0,a.C4)(t.locked||t.showModal||t.isUpdateInProgress||!t.isBootDone?"locked":"")},[(0,s.Lk)("nav",null,[(0,s.Lk)("div",r,[l,(0,s.Lk)("div",c,[(0,s.Lk)("div",{class:(0,a.C4)(t.phaseAmount>0?"phase active":"phase")},"1",2),(0,s.Lk)("div",{class:(0,a.C4)(t.phaseAmount>1?"phase active":"phase")},"2",2),(0,s.Lk)("div",{class:(0,a.C4)(t.phaseAmount>2?"phase active":"phase")},"3",2)])]),(0,s.Lk)("div",u,[(0,s.Lk)("div",{class:"btn btn-outline-primary lock-screen",onClick:e[0]||(e[0]=(...e)=>t.changeTimeout&&t.changeTimeout(...e))},m),(0,s.Lk)("div",{class:"btn btn-outline-primary lock-screen",onClick:e[1]||(e[1]=(...e)=>t.changePin&&t.changePin(...e))},g),(0,s.Lk)("div",{class:"btn btn-outline-primary lock-screen",onClick:e[2]||(e[2]=(...e)=>t.setLocked&&t.setLocked(...e))},L)])]),(0,s.Lk)("div",b,[(0,s.Lk)("div",C,[(0,s.bF)(p),(0,s.bF)(h)])])],2),t.locked&&!t.isUpdateInProgress&&t.isBootDone?((0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",P,[(0,s.Lk)("div",y,[_,(0,s.Lk)("div",T,[(0,s.Lk)("input",{id:"unlock-code",value:t.inputPrompt,type:t.showPass?"text":"password"},null,8,I),(0,s.Lk)("span",{id:"toggle-show-pass",onClick:e[4]||(e[4]=(...e)=>t.toggleShowPass&&t.toggleShowPass(...e)),class:(0,a.C4)(t.showPass?"fas fa-eye":"fas fa-eye-slash")},null,2)]),(0,s.Lk)("div",x,[(0,s.Lk)("div",W,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[5]||(e[5]=e=>t.addToInputPrompt(1))},"1"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[6]||(e[6]=e=>t.addToInputPrompt(2))},"2"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[7]||(e[7]=e=>t.addToInputPrompt(3))},"3")]),(0,s.Lk)("div",S,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[8]||(e[8]=e=>t.addToInputPrompt(4))},"4"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[9]||(e[9]=e=>t.addToInputPrompt(5))},"5"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[10]||(e[10]=e=>t.addToInputPrompt(6))},"6")]),(0,s.Lk)("div",M,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[11]||(e[11]=e=>t.addToInputPrompt(7))},"7"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[12]||(e[12]=e=>t.addToInputPrompt(8))},"8"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[13]||(e[13]=e=>t.addToInputPrompt(9))},"9")]),(0,s.Lk)("div",A,[(0,s.Lk)("div",{class:"numpad-button custom-btn action-button",onClick:e[14]||(e[14]=(...e)=>t.removeFromInputPrompt&&t.removeFromInputPrompt(...e))},O),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[15]||(e[15]=e=>t.addToInputPrompt(0))},"0"),(0,s.Lk)("div",{class:"numpad-button custom-btn action-button",onClick:e[16]||(e[16]=(...e)=>t.unlock&&t.unlock(...e))},E)])])])])])):(0,s.Q3)("",!0),t.isUpdateInProgress||!t.isBootDone?((0,s.uX)(),(0,s.CE)("div",j,[(0,s.Lk)("div",N,[t.isUpdateInProgress?((0,s.uX)(),(0,s.CE)("h3",Q,"Update läuft")):(0,s.Q3)("",!0),t.isBootDone?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h3",F,"Wallbox start läuft")),D,X])])):(0,s.Q3)("",!0),t.isModal(2)&&!t.isUpdateInProgress&&t.isBootDone?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("div",U,[(0,s.Lk)("div",{class:"close-modal",onClick:e[17]||(e[17]=(...e)=>t.closeChangePin&&t.closeChangePin(...e))},J),G,(0,s.Lk)("div",q,[0==t.stepChangePin?((0,s.uX)(),(0,s.CE)("h4",Y,"Alten Code eingeben")):(0,s.Q3)("",!0),1==t.stepChangePin?((0,s.uX)(),(0,s.CE)("h4",K,"Neuen Code eingeben")):(0,s.Q3)("",!0),2==t.stepChangePin?((0,s.uX)(),(0,s.CE)("h4",H,"Neuen Code wiederholen")):(0,s.Q3)("",!0),(0,s.Lk)("div",Z,[(0,s.Lk)("input",{id:"unlock-code",value:t.inputPrompt,type:t.showPass?"text":"password"},null,8,V),(0,s.Lk)("span",{id:"toggle-show-pass",onClick:e[18]||(e[18]=(...e)=>t.toggleShowPass&&t.toggleShowPass(...e)),class:(0,a.C4)(t.showPass?"fas fa-eye":"fas fa-eye-slash")},null,2)]),(0,s.Lk)("div",tt,[(0,s.Lk)("div",et,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[19]||(e[19]=e=>t.addToInputPrompt(1))},"1"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[20]||(e[20]=e=>t.addToInputPrompt(2))},"2"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[21]||(e[21]=e=>t.addToInputPrompt(3))},"3")]),(0,s.Lk)("div",nt,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[22]||(e[22]=e=>t.addToInputPrompt(4))},"4"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[23]||(e[23]=e=>t.addToInputPrompt(5))},"5"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[24]||(e[24]=e=>t.addToInputPrompt(6))},"6")]),(0,s.Lk)("div",ot,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[25]||(e[25]=e=>t.addToInputPrompt(7))},"7"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[26]||(e[26]=e=>t.addToInputPrompt(8))},"8"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[27]||(e[27]=e=>t.addToInputPrompt(9))},"9")]),(0,s.Lk)("div",st,[(0,s.Lk)("div",{class:"numpad-button custom-btn action-button",onClick:e[28]||(e[28]=(...e)=>t.removeFromInputPrompt&&t.removeFromInputPrompt(...e))},it),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[29]||(e[29]=e=>t.addToInputPrompt(0))},"0"),(0,s.Lk)("div",{class:"numpad-button custom-btn action-button",onClick:e[30]||(e[30]=(...e)=>t.nextStepChangePin&&t.nextStepChangePin(...e))},lt)])])])])])):(0,s.Q3)("",!0),t.showModal&&t.isModal(3)?((0,s.uX)(),(0,s.CE)("div",ct,[(0,s.Lk)("div",ut,[(0,s.Lk)("div",{class:"close-modal",onClick:e[31]||(e[31]=(...e)=>t.closeChangeTimeout&&t.closeChangeTimeout(...e))},pt),mt,(0,s.Lk)("div",ht,[kt,(0,s.Lk)("div",gt,[(0,s.Lk)("input",{id:"unlock-code",value:t.inputPrompt},null,8,ft)]),(0,s.Lk)("div",vt,[(0,s.Lk)("div",Lt,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[32]||(e[32]=e=>t.addToInputPrompt(1))},"1"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[33]||(e[33]=e=>t.addToInputPrompt(2))},"2"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[34]||(e[34]=e=>t.addToInputPrompt(3))},"3")]),(0,s.Lk)("div",bt,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[35]||(e[35]=e=>t.addToInputPrompt(4))},"4"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[36]||(e[36]=e=>t.addToInputPrompt(5))},"5"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[37]||(e[37]=e=>t.addToInputPrompt(6))},"6")]),(0,s.Lk)("div",Ct,[(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[38]||(e[38]=e=>t.addToInputPrompt(7))},"7"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[39]||(e[39]=e=>t.addToInputPrompt(8))},"8"),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[40]||(e[40]=e=>t.addToInputPrompt(9))},"9")]),(0,s.Lk)("div",wt,[(0,s.Lk)("div",{class:"numpad-button custom-btn action-button",onClick:e[41]||(e[41]=(...e)=>t.removeFromInputPrompt&&t.removeFromInputPrompt(...e))},yt),(0,s.Lk)("div",{class:"numpad-button custom-btn",onClick:e[42]||(e[42]=e=>t.addToInputPrompt(0))},"0"),(0,s.Lk)("div",{class:"numpad-button custom-btn action-button",onClick:e[43]||(e[43]=(...e)=>t.saveTimeout&&t.saveTimeout(...e))},Tt)])])])])])):(0,s.Q3)("",!0)],64)}var xt=n(1114),Wt=n(9975),St=n(144),Mt=n(8971),At=n(3345);const Bt={host:"localhost"==location.hostname?"172.17.1.141":location.hostname,port:"https:"==location.protocol?443:80,endpoint:"/ws",protocol:"https:"==location.protocol?"wss":"ws",connectTimeout:4e3,reconnectPeriod:4e3,clean:!1,clientId:Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,6)};let Ot;const{host:Rt,port:Et,endpoint:jt,...Nt}=Bt,Qt=`${Nt.protocol}://${Rt}:${Et}${jt}`;try{console.info("MQTT connecting to: "+Qt),Ot=At.A.connect(Qt,Nt),Ot.on("connect",(()=>{console.info("MQTT connection successful")})),Ot.on("disconnect",(()=>{console.info("MQTT disconnected")})),Ot.on("error",(t=>{console.error("MQTT connection failed: ",t)}))}catch(fo){console.error("MQTT connect error: ",fo)}function Ft(t){Ot?Ot.on("message",t):console.error("MqttRegister: MQTT client not available")}function Dt(t){const e=0;Ot.subscribe(t,{qos:e},(t=>{t&&console.error("MQTT Subscription error: "+t)}))}function Xt(t){Ot.unsubscribe(t,(e=>{e&&console.error("MQTT Unsubscribe from "+t+" failed: "+e)}))}function zt(t,e){const n=0;if(Ot.connected)try{Ot.publish(t,e,{qos:n},(n=>{n&&console.warn("MQTT publish error: ",n),console.info("MQTT publish: Message sent: ["+t+"]("+e+")")}))}catch(fo){console.warn("MQTT publish: caught error: "+fo)}else console.warn("MQTT publish: Not connected. Waiting 4 seconds"),(0,Mt.wRz)((()=>{console.warn("MQTT publish: Trying to publish again..."),Ot.publish(t,e,{qos:n},(n=>{n&&console.warn("MQTT publish error: ",n),console.info("MQTT publish: Message sent: ["+t+"]("+e+")")}))}),4e3)}function Ut(){return Bt.clientId}const $t={"openWB/internal_chargepoint/0/get/plug_state":ee,"openWB/internal_chargepoint/0/get/charge_state":ne,"openWB/internal_chargepoint/0/get/imported":oe,"openWB/internal_chargepoint/0/set/manual_lock":ae,"openWB/internal_chargepoint/0/get/power":se,"openWB/internal_chargepoint/0/get/evse_current":ie,"openWB/internal_chargepoint/0/get/currents":re,"openWB/internal_chargepoint/0/get/voltages":le,"openWB/internal_chargepoint/0/get/serial_number":ce,"openWB/internal_chargepoint/0/get/meter_model":ue,"openWB/internal_chargepoint/0/get/phases_in_use":de,"openWB/system/version":pe,"openWB/system/boot_done":be,"openWB/system/update_in_progress":Ce,"openWB/optional/int_display/standby":_e,"openWB/optional/int_display/pin_code":Te,"yourCharge/config/min_evse_current_allowed":me,"yourCharge/config/max_evse_current_allowed":he,"yourCharge/config/standard_socket_installed":ke,"yourCharge/status/standard_socket":ge,"yourCharge/status/cp_enabled":fe,"yourCharge/status/scanned_rfid":ve,"yourCharge/control/socket_activated":Le,"yourCharge/status/energy_charged_since_plugged":we,"yourCharge/status/energy_charged_today":Pe,"yourCharge/status/energy_limit":ye},Jt=[...Object.keys($t),"openWB/command/"+Ut()+"/#"];function Gt(){Ft(te),qt()}function qt(){console.log("MQTT subscribing register"),Jt.forEach((t=>{Dt(t)}))}function Yt(){console.log("MQTT subscribing stop"),Jt.forEach((t=>{Xt(t)}))}function Kt(t){Vt("openWB/set/internal_chargepoint/0/set/manual_lock",t)}function Ht(t){Vt("openWB/set/optional/int_display/pin_code",t)}function Zt(t){console.log("timeout",t),Vt("openWB/set/optional/int_display/standby",t)}function Vt(t,e){switch(typeof e){case"number":zt(t,JSON.stringify(+e));break;case"object":zt(t,JSON.stringify(e));break;case"string":zt(t,JSON.stringify(e));break;default:zt(t,JSON.stringify(e))}}function te(t,e){const n=t,o=e.toString();n in $t?$t[n](o):console.log("Ignored message: "+n+" "+o)}function ee(t){We.isPlugged="true"==t}function ne(t){We.isCharging="true"==t}function oe(t){We.metered=Number(t)}function se(t){We.chargePower=Number(t);const e=Ie;e[Date.now()]=We.chargePower,xe(e)}function ae(t){We.__isLocked="true"==t}function ie(t){We.evseCurrent=Number(t)}function re(t){We.currents=JSON.parse(t)}function le(t){We.voltages=JSON.parse(t)}function ce(t){We.serialNumber=t}function ue(t){We.meterModel=t}function de(t){We.phasesInUse=+t}function pe(t){We.version=t}function me(t){We.minAmpsConfigured=Number(t)}function he(t){We.maxAmpsConfigured=Number(t)}function ke(t){We.isSocketInstalled="true"==t}function ge(t){We.socketStatus=JSON.parse(t)}function fe(t){We.isEnabled="true"==t}function ve(t){We.lastRfid=JSON.parse(t)}function Le(t){We.isSocketActive="true"==t}function be(t){We.isBootDone="true"==t}function Ce(t){We.isUpdateInProgress="true"==t}function we(t){We.energySincePlugged=Number(t)}function Pe(t){We.energyChargedToday=Number(t)}function ye(t){We.energyLimit=Number(t)}function _e(t){We.__displayTimeout=Number(t)}function Te(t){We.__pinCode=JSON.parse(t),console.log(t)}let Ie=(0,St.Kh)({});function xe(t){const e=Date.now()-864e5;for(const n of Object.keys(t)){const o=Number(n);o>=e?Ie[o]=t[o]:delete Ie[o]}Ie=t}const We=(0,St.Kh)({isPlugged:!1,isCharging:!1,isBootDone:!1,isUpdateInProgress:!1,imported:0,evseCurrent:0,currents:[0,0,0],voltages:[0,0,0],serialNumber:"",meterModel:"",__pinCode:"",socketStatus:{imported_wh:0,exported_wh:0,current:0,voltage:0,power:0,power_factor:0,serial:"",model:"",last_update:""},__isLocked:!1,isEnabled:!1,metered:0,__displayTimeout:30,chargePower:0,minAmpsConfigured:0,maxAmpsConfigured:0,energySincePlugged:0,energyChargedToday:0,energyLimit:0,isSocketActive:!1,isSocketInstalled:!1,phasesInUse:0,get pinCode(){return this.__pinCode},set pinCode(t){this.__pinCode=t,Ht(t)},maxPower:()=>We.maxAmpsConfigured*(We.voltages.reduce(((t,e)=>e+t),0)/3)*3,get isLocked(){return this.__isLocked},set isLocked(t){this.__isLocked=t,Kt(t)},get displayTimeout(){return this.__displayTimeout},set displayTimeout(t){this.__displayTimeout=t,Zt(t)},version:""}),Se=t=>((0,s.Qi)("data-v-78d56cfd"),t=t(),(0,s.jt)(),t),Me={class:"wb-widget card p-0 m-0 shadow widgetWidth"},Ae={class:"d-flex justify-content-between"},Be={class:"m-3 mt-2 mb-1"},Oe=Se((()=>(0,s.Lk)("div",{class:"p-0"},"(title goes here)",-1))),Re={class:"container-fluid p-0"};var Ee=(0,s.pM)({__name:"FlexItem",props:{variableWidth:{type:Boolean},fullWidth:{type:Boolean},size:{}},setup(t){const e=t,n=(0,s.EW)((()=>null!=e.size?"col-"+e.size:"col-12"));return(t,e)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,a.C4)(["p-1 m-0 pt-2 d-flex",n.value])},[(0,s.Lk)("div",Me,[(0,s.Lk)("div",Ae,[(0,s.Lk)("h3",Be,[(0,s.RG)(t.$slots,"title",{},(()=>[Oe]))])]),(0,s.Lk)("div",Re,[(0,s.RG)(t.$slots,"default")])])],2))}}),je=n(1241);const Ne=(0,je.A)(Ee,[["__scopeId","data-v-78d56cfd"]]);var Qe=Ne;function Fe(t){return(Math.round(t/100)/10).toLocaleString("de-DE",{minimumFractionDigits:1})+" kW"}function De(t){return(Math.round(t/100)/10).toLocaleString("de-DE",{minimumFractionDigits:1})+" kWh"}function Xe(t){return`${t.getDate().toString().padStart(2,"0")}.${(t.getMonth()+1).toString().padStart(2,"0")}.${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}const ze=(0,s.Lk)("div",{class:"d-flex justify-content-end"},null,-1),Ue={class:"p-3 pt-0"},$e={class:"table"},Je=(0,s.Lk)("th",{scope:"row"},"Ladekabel",-1),Ge={class:"kWhCounter-1"},qe={class:"bg"},Ye=(0,s.Lk)("th",{scope:"row"},"Ladestatus",-1),Ke={class:"kWhCounter-1"},He=(0,s.Lk)("th",{scope:"row"},"Ladepunktfreigabe",-1),Ze={class:"kWhCounter-1"},Ve={class:"bg"},tn=(0,s.Lk)("th",{scope:"row"},"Letzte Lademenge",-1),en={class:"kWhchargedsinceplugged-1"},nn={class:""},on=(0,s.Lk)("th",{scope:"row"},"Heute geladen",-1),sn={class:"kWhDailyCharged-1"},an={class:"bg"},rn=(0,s.Lk)("th",{scope:"row"},"Zählerstand",-1),ln={class:"kWhCounter-1"},cn={class:""},un=(0,s.Lk)("th",{scope:"row"},"Ladelimit",-1),dn={class:"kWhCounter-1"},pn={class:"bg"},mn=(0,s.Lk)("th",{scope:"row"},"Ladeleistung maximal",-1),hn={class:"kWhCounter-1"},kn={class:""},gn=(0,s.Lk)("th",{scope:"row"},"Freigegebener Ladestrom",-1),fn={class:"kWhCounter-1"},vn={key:0},Ln=(0,s.Lk)("h3",null,"Steckdose",-1),bn={class:"table"},Cn=(0,s.Lk)("th",{scope:"row"},"Status",-1),wn={class:"kWhCounter-1"},Pn={class:"bg"},yn=(0,s.Lk)("th",{scope:"row"},"Zählerstand",-1),_n={class:"kWhCounter-1"},Tn={class:""},In=(0,s.Lk)("th",{scope:"row"},"Leistung",-1),xn={class:"kWhCounter-1"},Wn={class:"bg"},Sn=(0,s.Lk)("th",{scope:"row"},"Stromstärke",-1),Mn={class:"kWhCounter-1"};var An=(0,s.pM)({__name:"InfoTableCard",setup(t){return(t,e)=>((0,s.uX)(),(0,s.Wv)(Qe,{size:7},{title:(0,s.k6)((()=>[(0,s.eW)(" Ladeinformation ")])),buttons:(0,s.k6)((()=>[ze])),default:(0,s.k6)((()=>[(0,s.Lk)("div",Ue,[(0,s.Lk)("table",$e,[(0,s.Lk)("tr",null,[Je,(0,s.Lk)("td",Ge,(0,a.v_)((0,St.R1)(We).isPlugged?"Eingesteckt":"Ausgesteckt"),1)]),(0,s.Lk)("tr",qe,[Ye,(0,s.Lk)("td",Ke,(0,a.v_)((0,St.R1)(We).isCharging?"Lädt":"Inaktiv"),1)]),(0,s.Lk)("tr",null,[He,(0,s.Lk)("td",Ze,(0,a.v_)((0,St.R1)(We).isEnabled?"Freigegeben":"Nicht freigegeben"),1)]),(0,s.Lk)("tr",Ve,[tn,(0,s.Lk)("td",en,(0,a.v_)((0,St.R1)(De)((0,St.R1)(We).energySincePlugged)),1)]),(0,s.Lk)("tr",nn,[on,(0,s.Lk)("td",sn,(0,a.v_)((0,St.R1)(De)((0,St.R1)(We).energyChargedToday)),1)]),(0,s.Lk)("tr",an,[rn,(0,s.Lk)("td",ln,(0,a.v_)((0,St.R1)(De)((0,St.R1)(We).metered)),1)]),(0,s.Lk)("tr",cn,[un,(0,s.Lk)("td",dn,(0,a.v_)((0,St.R1)(De)((0,St.R1)(We).energyLimit)),1)]),(0,s.Lk)("tr",pn,[mn,(0,s.Lk)("td",hn,(0,a.v_)((0,St.R1)(Fe)((0,St.R1)(We).maxPower())),1)]),(0,s.Lk)("tr",kn,[gn,(0,s.Lk)("td",fn,(0,a.v_)((0,St.R1)(We).maxAmpsConfigured)+" A",1)])]),(0,St.R1)(We).isSocketInstalled?((0,s.uX)(),(0,s.CE)("div",vn,[Ln,(0,s.Lk)("table",bn,[(0,s.Lk)("tr",null,[Cn,(0,s.Lk)("td",wn,(0,a.v_)((0,St.R1)(We).isSocketActive?"Aktiv":"Inaktiv"),1)]),(0,s.Lk)("tr",Pn,[yn,(0,s.Lk)("td",_n,(0,a.v_)((0,St.R1)(De)((0,St.R1)(We).socketStatus.exported_wh)),1)]),(0,s.Lk)("tr",Tn,[In,(0,s.Lk)("td",xn,(0,a.v_)((0,St.R1)(We).socketStatus.power)+" W",1)]),(0,s.Lk)("tr",Wn,[Sn,(0,s.Lk)("td",Mn,(0,a.v_)((0,St.R1)(We).socketStatus.current)+" A",1)])])])):(0,s.Q3)("",!0)])])),_:1}))}});const Bn=An;var On=Bn;const Rn=["width","height"],En=["origin","transform"];var jn=(0,s.pM)({__name:"PowerGraph",props:{width:{},height:{},margin:{},stackOrder:{}},setup(t){const e=t,n=(0,s.EW)((()=>{const t=(0,Mt.Ltv)("g#PowerGraph");r(t),t.selectAll(".axis").remove();const e=t.append("g").attr("class","axis");return e.call(i.value),e.selectAll(".tick").attr("font-size",12).attr("color","var(--color-axis)"),e.selectAll(".tick line").attr("stroke","var(--color-axis)"),e.select(".domain").attr("stroke","var(--color-axis)"),"PowerGraph.vue"})),o=(0,s.EW)((()=>{const t=Object.keys(Ie).map((t=>Number(t)));return(0,Mt.m4Y)().domain([Math.min(...t),Math.max(...t,We.maxPower())]).range([0,e.width])})),a=(0,s.EW)((()=>{const t=Math.max(...Object.values(Ie),We.maxPower());return(0,Mt.m4Y)().range([e.height-10,0]).domain([0,Math.ceil(t)])})),i=(0,s.EW)((()=>(0,Mt.V4s)(a.value).tickSizeInner(-e.width).ticks(4).tickFormat((t=>(0==t?"":Math.round(10*t)/10/1e3).toLocaleString(void 0)))));function r(t){const e=Object.entries(Ie).map((([t,e])=>({x:Number(t),y:e}))),n=(0,Mt.Wcw)().x((t=>o.value(t.x))).y0(a.value(0)).y1((t=>a.value(t.y)));t.selectAll("*").remove(),t.append("path").datum(e).attr("class","usagearea").attr("d",n).attr("fill","var(--main-color)")}return(0,s.wB)((()=>Ie),(()=>{const t=(0,Mt.Ltv)("g#PowerGraph");r(t)}),{deep:!0}),(t,e)=>((0,s.uX)(),(0,s.CE)("svg",{width:t.width+t.margin.left+t.margin.right,height:t.height+t.margin.top+t.margin.bottom},[(0,s.Lk)("g",{id:"PowerGraph",origin:n.value,transform:"translate("+t.margin.left+","+t.margin.top+")"},null,8,En)],8,Rn))}});const Nn=(0,je.A)(jn,[["__scopeId","data-v-bf623318"]]);var Qn=Nn;const Fn=["transform"],Dn=["origin","transform"],Xn=14;var zn=(0,s.pM)({__name:"XAxis",props:{width:{},height:{},margin:{}},setup(t){const e=t,n=(0,s.EW)((()=>(0,Mt.l78)(o.value).ticks(4).tickSizeInner(0).tickFormat((0,Mt.DCK)("%H:%M")))),o=(0,s.EW)((()=>{let t=(0,Mt.Xxv)(Object.keys(Ie),(t=>Number(t)));return t[0]&&t[1]?(0,Mt.w7C)().domain(t).range([0,e.width]):(0,Mt.w7C)().range([0,0])})),a=(0,s.EW)((()=>{let t=(0,Mt.Ltv)("g#XAxis");return t.selectAll("*").remove(),t.call(n.value),t.selectAll(".tick > text").attr("fill",(()=>"var(--color-axis)")).attr("font-size",Xn+"px"),t.selectAll(".tick line").attr("stroke","var(--color-axis)"),t.select(".domain").attr("stroke","var(--color-axis)"),t.append("text").attr("x",-e.margin.left).attr("y",0).attr("fill","var(--color-axis)").attr("font-size",Xn+"px").text("kW").attr("text-anchor","start"),"XAxis.vue"}));return(t,e)=>((0,s.uX)(),(0,s.CE)("g",{transform:"translate("+t.margin.left+","+t.margin.top/2+")"},[(0,s.Lk)("g",{id:"XAxis",class:"axis",origin:a.value,transform:"translate(0,"+(t.height-6)+")"},null,8,Dn)],8,Fn))}});const Un=zn;var $n=Un;const Jn={class:"power-bar"},Gn={class:"p-3 mt-1"},qn=(0,s.Lk)("h3",{class:""},"Verlauf",-1),Yn={id:"InfoTableCard",class:"p-0 m-0"},Kn=["viewBox"],Hn={class:"p-3 pt-0"},Zn=(0,s.Lk)("h3",null,"Letzter RFID Chip",-1),Vn={class:"table"},to=(0,s.Lk)("th",{scope:"row"},"ID",-1),eo={class:"kWhCounter-1"},no={class:"bg"},oo=(0,s.Lk)("th",{scope:"row"},"Gescanned am",-1),so={class:"kWhCounter-1"},ao=500,io=250;var ro=(0,s.pM)({__name:"PowerCard",setup(t){const e={top:10,right:0,bottom:10,left:25},n=(0,s.EW)((()=>`${Fe(We.chargePower)} / ${Fe(We.maxPower())}`));return(t,o)=>((0,s.uX)(),(0,s.Wv)(Qe,{"full-width":!1,size:5},{title:(0,s.k6)((()=>[(0,s.eW)(" Aktuelle Leistung ")])),default:(0,s.k6)((()=>[(0,s.Lk)("div",Jn,[(0,s.Lk)("div",{style:(0,a.Tr)("width:"+(0,St.R1)(We).chargePower/(0,St.R1)(We).maxPower()*100+"%")},null,4),(0,s.Lk)("span",null,(0,a.v_)(n.value),1)]),(0,s.Lk)("div",Gn,[qn,(0,s.Lk)("figure",Yn,[((0,s.uX)(),(0,s.CE)("svg",{viewBox:"0 0 "+ao+" "+io},[(0,s.bF)(Qn,{width:ao-e.left-2*e.right,height:io-(e.top+2*e.bottom),margin:e,"stack-order":1},null,8,["width","height"]),(0,s.bF)($n,{width:ao-e.left-2*e.right,height:io-(e.top+2*e.bottom),margin:e,"graph-data":(0,St.R1)(Ie)},null,8,["width","height","graph-data"])],8,Kn))])]),(0,s.Lk)("div",Hn,[Zn,(0,s.Lk)("table",Vn,[(0,s.Lk)("tr",null,[to,(0,s.Lk)("td",eo,(0,a.v_)((0,St.R1)(We).lastRfid?.rfid??"--"),1)]),(0,s.Lk)("tr",no,[oo,(0,s.Lk)("td",so,(0,a.v_)(null==(0,St.R1)(We).lastRfid?.timestamp?"--":(0,St.R1)(Xe)(new Date((0,St.R1)(We).lastRfid?.timestamp??""))),1)])])])])),_:1}))}});const lo=ro;var co,uo=lo,po=function(t,e,n,o){var s,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};(function(t){t[t["none"]=0]="none",t[t["locked"]=1]="locked",t[t["changeCode"]=2]="changeCode",t[t["changeTimeout"]=3]="changeTimeout"})(co||(co={}));let mo=class extends Wt.lD{constructor(...t){super(...t),(0,xt.A)(this,"inputPrompt",""),(0,xt.A)(this,"pinConfirm",""),(0,xt.A)(this,"autoLockInterval",void 0),(0,xt.A)(this,"showPass",!1),(0,xt.A)(this,"modalType",co.none),(0,xt.A)(this,"codeConfirmed",!1),(0,xt.A)(this,"stepChangePin",0)}get showModal(){return this.modalType!=co.none}get isUpdateInProgress(){return We.isUpdateInProgress}get isBootDone(){return We.isBootDone}reload(){location.reload()}isModal(t){return t==this.modalType}init(){this.resetOrInitLockInterval(),setTimeout((()=>{""==We.pinCode&&(this.modalType=co.changeCode)}),3e3)}nextStepChangePin(){switch(this.stepChangePin){default:case 0:if(console.log(this.inputPrompt,We.pinCode),this.inputPrompt!=We.pinCode)return void(this.inputPrompt="");this.inputPrompt="",this.stepChangePin=1;break;case 1:this.pinConfirm=this.inputPrompt,this.inputPrompt="",this.stepChangePin=2;break;case 2:if(this.inputPrompt!=this.pinConfirm)return void(this.inputPrompt="");this.savePin(),this.stepChangePin=0;break}}closeChangeTimeout(){this.modalType=co.none,this.inputPrompt=""}closeChangePin(){this.stepChangePin=0,this.modalType=co.none,this.inputPrompt="",this.pinConfirm="",this.codeConfirmed=!1}resetOrInitLockInterval(){this.autoLockInterval&&clearInterval(this.autoLockInterval),this.autoLockInterval=setInterval((()=>{We.isLocked||this.modalType!=co.none||(this.modalType=co.locked,this.inputPrompt="",We.isLocked=!0)}),1e3*We.displayTimeout)}savePin(){this.inputPrompt.length<4||(We.isLocked=!1,We.pinCode=this.inputPrompt,this.resetOrInitLockInterval(),this.closeChangePin())}saveTimeout(){if(this.inputPrompt.length<1)return;const t=+this.inputPrompt;t<3||(We.displayTimeout=t,this.closeChangeTimeout())}toggleShowPass(){this.showPass=!this.showPass}removeFromInputPrompt(){this.inputPrompt=this.inputPrompt.slice(0,-1)}addToInputPrompt(t){this.inputPrompt+=t}unlock(){this.inputPrompt==We.pinCode?(We.isLocked=!1,this.inputPrompt="",this.modalType=co.none,this.resetOrInitLockInterval()):this.inputPrompt=""}get homeclass(){return"home container-fluid px-2 m-0"+(We.isLocked?" locked":"")}get phaseAmount(){return We.phasesInUse}get locked(){return We.isLocked}setLocked(){this.inputPrompt="",this.showPass=!1,We.isLocked=!We.isLocked}changePin(){this.stepChangePin=0,this.inputPrompt="",this.pinConfirm="",this.showPass=!1,this.modalType=co.changeCode}changeTimeout(){this.modalType=co.changeTimeout,this.inputPrompt=`${We.displayTimeout}`}mounted(){this.init(),window.addEventListener("visibilitychange",this.visibilityChange),Gt()}visibilityChange(){"visible"!==document.visibilityState||document.hidden?this.lostFocus():this.haveFocus()}haveFocus(){qt()}lostFocus(){Yt()}};mo=po([(0,Wt.JY)({components:{InfoTableCard:On,PowerCard:uo}})],mo);var ho=mo;const ko=(0,je.A)(ho,[["render",It]]);var go=ko;(0,o.Ef)(go).mount("#app")}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,o,s,a){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],s=t[u][1],a=t[u][2];for(var r=!0,l=0;l<o.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(r=!1,a<i&&(i=a));if(r){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[o,s,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/openWB/web/display/themes/yourcharge/"}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,a,i=o[0],r=o[1],l=o[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var u=l(n)}for(e&&e(o);c<i.length;c++)a=i[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},o=self["webpackChunkopen_wb_display_theme"]=self["webpackChunkopen_wb_display_theme"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(304)}));o=n.O(o)})();
//# sourceMappingURL=app.c348bb93.js.map